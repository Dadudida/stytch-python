classname: Discovery
methods:
sub_apis:
  - classname: Organizations
    sub_url: discovery/organizations
    filename: discovery_organizations
    methods:
      - name: list
        use_base_path_as_api_path: True
        method: POST
        args:
          - name: intermediate_session_token
            arg_type: Optional[str] = None
          - name: session_token
            arg_type: Optional[str] = None
          - name: session_jwt
            arg_type: Optional[str] = None
        response_type:
          email_address: str
          discovered_organizations: List[DiscoveredOrganization]
      - name: create
        method: POST
        args:
          - name: intermediate_session_token
            arg_type: str
          - name: organization_name
            arg_type: str
          - name: organization_slug
            arg_type: str
          - name: session_duration_minutes
            arg_type: Optional[int] = None
          - name: session_custom_claims
            arg_type: Optional[Dict[str, Any]] = None
          - name: organization_logo_url
            arg_type: Optional[str] = None
          - name: trusted_metadata
            arg_type: Optional[Dict[str, Any]] = None
          - name: email_jit_provisioning
            arg_type: Optional[str] = None
          - name: email_invites
            arg_type: Optional[str] = None
          - name: email_allowed_domains
            arg_type: Optional[List[str]] = None
          - name: sso_jit_provisioning
            arg_type: Optional[str] = None
          - name: auth_methods
            arg_type: Optional[str] = None
          - name: allowed_auth_methods
            arg_type: Optional[List[str]] = None
        response_type:
          member_id: str
          member_session: Optional[B2BStytchSession]
          session_token: str
          session_jwt: str
          member: Member
          organization: Organization
  - classname: IntermediateSessions
    sub_url: discovery/intermediate_sessions
    filename: discovery_intermediate_sessions
    methods:
      - name: exchange
        method: POST
        args:
          - name: intermediate_session_token
            arg_type: str
          - name: organization_id
            arg_type: str
          - name: session_duration_minutes
            arg_type: Optional[int] = None
          - name: session_custom_claims
            arg_type: Optional[Dict[str, Any]] = None
        response_type:
          member_id: str
          member_session: Optional[B2BStytchSession]
          session_token: str
          session_jwt: str
          member: Member
          organization: Organization
